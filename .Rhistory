animate(plot5,width = 800, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif",loop=F))
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`, group=Year)) +
geom_bar(stat = "identity",fill = rainbow(22)) +
theme_bw() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
transition_states(
`Average weekly deaths`,
transition_length = 1
)+
shadow_mark()+
ease_aes('sine-in-out')
animate(plot5,width = 800, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif",loop=F))
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(stat = "identity",fill = rainbow(22)) +
theme_bw() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
transition_states(
`Average weekly deaths`,
transition_length = 5,
state_length = 0
)+
shadow_mark()+
enter_fade() +
exit_shrink()+
ease_aes('sine-in-out')
animate(plot5,width = 800, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif",loop=F))
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(stat = "identity",fill = rainbow(22)) +
theme_bw() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 5,
state_length = 0
)+
shadow_mark()+
enter_fade() +
exit_shrink()+
ease_aes('sine-in-out')
animate(plot5,width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif",loop=F))
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(stat = "identity",fill = rainbow(22)) +
theme_bw() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 5,
state_length = 0
)+
shadow_mark()+
#enter_fade() +
#exit_shrink()+
#ease_aes('sine-in-out')
animate(plot5,width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif",loop=F))
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(stat = "identity",fill = rainbow(22)) +
theme_bw() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 5,
state_length = 0
)+
shadow_mark()
animate(plot5,width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif",loop=F))
colourCount = 22
getPalette = colorRampPalette(brewer.pal(9, "Set1"))
library(RColorBrewer)
colourCount = 22
getPalette = colorRampPalette(brewer.pal(9, "Set1"))
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(stat = "identity",fill = getPalette(colourCount)) +
theme_bw() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 5,
state_length = 0
)+
shadow_mark()
animate(plot5,duration = 5, fps=15, width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif",loop=F))
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(stat = "identity",fill = getPalette(colourCount)) +
theme_bw() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 5,
state_length = 0
)+
shadow_mark(past = TRUE, future = FALSE)
animate(plot5,duration = 10, fps=25, width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif",loop=F))
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(stat = "identity",fill = getPalette(colourCount)) +
theme_bw() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 5,
state_length = 0
)+
shadow_mark(past = TRUE, future = FALSE)
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(stat = "identity",fill = getPalette(colourCount)) +
theme_bw() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 5,
state_length = 0
)+
shadow_mark(past = TRUE, future = FALSE)+
enter_fade() +
exit_shrink()+
ease_aes('sine-in-out')
animate(plot5,duration = 10, fps=25, width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif",loop=F))
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(stat = "identity",fill = getPalette(colourCount)) +
theme_bw() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 5,
state_length = 0
)+
shadow_mark(past = TRUE, future = FALSE)+
exit_fade() +
ease_aes('sine-in-out')
animate(plot5,duration = 10, fps=25, width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif",loop=F))
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(stat = "identity",fill = getPalette(colourCount)) +
theme_bw() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 5,
state_length = 0
)+
shadow_mark(past = TRUE, future = FALSE)+
exit_fade()
plot5
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(stat = "identity",fill = getPalette(colourCount)) +
theme_bw() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 5,
state_length = 0
)+
shadow_mark(past = TRUE, future = FALSE)+
exit_fade()
animate(plot5,duration = 10, fps=25, width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif",loop=0))
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(stat = "identity",fill = getPalette(colourCount)) +
theme_bw() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 5,
state_length = 0
)+
shadow_mark(past = TRUE, future = FALSE)+
exit_fade()
animate(plot5,duration = 10, fps=25, width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif"),end_pause=30)
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(stat = "identity",fill = getPalette(colourCount)) +
theme_bw() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 5,
state_length = 0
)+
shadow_mark()
plot5
animate(plot5,duration = 10, fps=25, width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif"),end_pause=30)
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(stat = "identity",fill = getPalette(colourCount)) +
theme_ipsum() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 3,
state_length = 0
)+
shadow_mark()
plot5
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(position = "dodge",stat = "identity",fill = getPalette(colourCount)) +
geom_text(aes(label=`Average weekly deaths`), position=position_dodge(width=0.9), vjust=-0.25) +
theme_ipsum() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 3,
state_length = 0
)+
shadow_mark()
plot5
animate(plot5,duration = 10, fps=25, width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif"),end_pause=30)
avgWeeklyDeaths <- function(yrs = 2000:2021){
year <- 2000:2021
AWD <- c()
for (yr in yrs){
AWD[yr-1999] <- mean(weeklyDeaths(get(paste("A",yr,sep="")),
yr)$Deaths[!is.na(weeklyDeaths(get(paste("A",
yr,sep="")),yr)$Deaths)])
}
awd <- data.frame(year,AWD)
awd[,-2] <- round(awd[,-2],0)
colnames(awd) <- c("Year","Average weekly deaths")
assign("aWD",awd,envir = globalenv())
}
avgWeeklyDeaths()
aWD
avgWeeklyDeaths <- function(yrs = 2000:2021){
year <- 2000:2021
AWD <- c()
for (yr in yrs){
AWD[yr-1999] <- mean(weeklyDeaths(get(paste("A",yr,sep="")),
yr)$Deaths[!is.na(weeklyDeaths(get(paste("A",
yr,sep="")),yr)$Deaths)])
}
awd <- data.frame(year,AWD)
#awd[,-2] <- round(awd[,-2],0)
colnames(awd) <- c("Year","Average weekly deaths")
assign("aWD",awd,envir = globalenv())
}
avgWeeklyDeaths()
aWD
avgWeeklyDeaths <- function(yrs = 2000:2021){
year <- 2000:2021
AWD <- c()
for (yr in yrs){
AWD[yr-1999] <- mean(weeklyDeaths(get(paste("A",yr,sep="")),
yr)$Deaths[!is.na(weeklyDeaths(get(paste("A",
yr,sep="")),yr)$Deaths)])
}
awd <- data.frame(year,AWD)
n <- vapply(awd, is.numeric, FUN.VALUE = logical(1))
awd[,n] <- round(awd[,n], digits = 0)
awd[,-2] <- round(awd[,-2],0)
colnames(awd) <- c("Year","Average weekly deaths")
assign("aWD",awd,envir = globalenv())
}
avgWeeklyDeaths()
aWD
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(position = "dodge",stat = "identity",fill = getPalette(colourCount)) +
geom_text(aes(label=`Average weekly deaths`), position=position_dodge(width=0.9), vjust=-0.25) +
theme_ipsum() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 3,
state_length = 0
)+
shadow_mark()
plot5
animate(plot5,duration = 10, fps=25, width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif"),end_pause=30)
loadLifeExpect()
# animation and plot showing life expetancy by sex
anim <- function(x){
m <- as.factor(x$Sex)
levels(m) <- c("Male","Female")
p_LE <- x%>%
ggplot(aes(x=Age,y=`Probability of death`,group=Sex,color=m)) +
geom_line(size=1.5) + ylim(0, max(test$Deaths)) +
ggtitle("Probability of death animation") +
scale_color_viridis_d("Sex") +
theme_ipsum() +
ggsave("plots/plot#4_LE.png", width = 7, height = 7)
p_LE.animation = p_LE+
transition_reveal(Age)+
view_follow(fixed_y=T)
#saving animation
animate(p_LE.animation, duration = 3, fps = 8, width = 800, height = 700,
renderer = gifski_renderer("animation/LE_animation.gif",loop=T))
}
library(RColorBrewer)
# Plot#5, average weekly deaths by years
aWD
colourCount = 22
getPalette = colorRampPalette(brewer.pal(9, "Set1"))
plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(position = "dodge",stat = "identity",fill = getPalette(colourCount)) +
geom_text(aes(label=`Average weekly deaths`), position=position_dodge(width=0.9), vjust=-0.25) +
theme_ipsum() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ggsave("plots/plot#5_bar.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 3,
state_length = 0
)+
shadow_mark()
animate(plot5,duration = 10, fps=25, width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif",loop=F))
loadLifeExpect()
anim(LE2018)
barAnim <- function(){plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(position = "dodge",stat = "identity",fill = getPalette(colourCount)) +
geom_text(aes(label=`Average weekly deaths`), position=position_dodge(width=0.9), vjust=-0.25) +
theme_ipsum() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ylim(0, 12000) +
ggsave("plots/plot#5_bar.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 3,
state_length = 0
)+
shadow_mark()
animate(plot5,duration = 10, fps=25, width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif",loop=F))
return(plot5)
}
barAnim()
# animation and plot showing life expetancy by sex
anim <- function(x){
m <- as.factor(x$Sex)
levels(m) <- c("Male","Female")
p_LE <- x%>%
ggplot(aes(x=Age,y=`Probability of death`,group=Sex,color=m)) +
geom_line(size=1.5) + ylim(0, max(test$Deaths)) +
ggtitle("Probability of death animation") +
scale_color_viridis_d("Sex") +
theme_ipsum() +
ggsave("plots/plot#4_LE.png", width = 7, height = 7)
p_LE.animation = p_LE+
transition_reveal(Age)+
view_follow(fixed_y=T)
#saving animation
animate(p_LE.animation, duration = 5, fps = 30, width = 1000, height = 900,
renderer = gifski_renderer("animation/LE_animation.gif",loop=T))
}
#Plot#4 Animation and plot showing life expectancy by sex
anim <- function(x){
m <- as.factor(x$Sex)
levels(m) <- c("Male","Female")
p_LE <- x%>%
ggplot(aes(x=Age,y=`Probability of death`,group=Sex,color=m)) +
geom_line(size=1.5) + ylim(0, max(test$Deaths)) +
ggtitle("Probability of death animation") +
scale_color_viridis_d("Sex") +
theme_ipsum() +
ggsave("plots/plot#4_LE.png", width = 7, height = 7)
p_LE.animation = p_LE+
transition_reveal(Age)+
view_follow(fixed_y=T)
#saving animation
animate(p_LE.animation, duration = 5, fps = 30, width = 1000, height = 900,
renderer = gifski_renderer("animation/LE_animation.gif",loop=T))
}
ainm(LE2015)
anim(LE2015)
#Plot#4 Animation and plot showing life expectancy by sex
lineAnim <- function(x){
m <- as.factor(x$Sex)
levels(m) <- c("Male","Female")
p_LE <- x%>%
ggplot(aes(x=Age,y=`Probability of death`,group=Sex,color=m)) +
geom_line(size=1.5) + ylim(0, max(test$Deaths)) +
ggtitle("Probability of death animation") +
scale_color_viridis_d("Sex") +
theme_ipsum() +
ggsave("plots/plot#4_LE.png", width = 7, height = 7)
p_LE.animation = p_LE+
transition_reveal(Age)+
view_follow(fixed_y=T)
#saving animation
animate(p_LE.animation, duration = 5, fps = 30, width = 800, height = 700,
renderer = gifski_renderer("animation/LE_animation.gif",loop=T))
}
library(RColorBrewer)
# Plot#5, Animation and plot showing average weekly deaths by years
colCount = 22
getPalette = colorRampPalette(brewer.pal(9, "Set1"))
barAnim <- function(){plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(position = "dodge",stat = "identity",fill = getPalette(colourCount)) +
geom_text(aes(label=`Average weekly deaths`), position=position_dodge(width=0.9), vjust=-0.25) +
theme_ipsum() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ylim(0, 12000) +
ggsave("plots/plot#5_bar.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 3,
state_length = 0
)+
shadow_mark()
animate(plot5,duration = 10, fps=25, width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif",loop=F))
}
lineAnim(LE2014)
barAnim()
barAnim <- function(){plot5 <- aWD%>%
ggplot(aes(x=Year,y=`Average weekly deaths`)) +
geom_bar(position = "dodge",stat = "identity",fill = getPalette(colourCount)) +
geom_text(aes(label=`Average weekly deaths`), position=position_dodge(width=0.9), vjust=-0.25) +
theme_ipsum() +
labs(title = "Average weekly deaths by years", x = "Year", y = "Deaths") +
ylim(0, 11500) +
ggsave("plots/plot#5_bar.png", width = 13, height = 7) +
transition_states(
`Average weekly deaths`,
transition_length = 3,
state_length = 0
)+
shadow_mark()
animate(plot5,duration = 10, fps=25, width = 1400, height = 700,
renderer = gifski_renderer("animation/barP_animation.gif",loop=F))
}
barAnim()
require("ggplot2")
# Plot#1, showing mortality by age groups
yearlyData <- yearlyDeathsByGroups(A2021)
ggplot(yearlyData, aes(Age, R)) + geom_bar(stat = "identity") +
labs(title = "2020 Deaths", x = "Age group", y = "Deaths") +
ggsave("plots/plot#1.png", width = 13, height = 7)
# Plot#2, showing weekly mortality for specific years
test <- data.frame()
for (year in 2019:2021) {
varName <- paste("A", year, sep = '')
test <- rbind(test, weeklyDeaths(get(varName), year))
}
Weeks <- factor(test$Week, labels = 1:53)
ggplot(test, aes(x = Weeks, y = Deaths,
group = Year, color = Year)) +
geom_line(size = 3) + ylim(0, max(test$Deaths)) +
ggsave("plots/plot#2.png", width = 13, height = 7)
# Plot#3, map
data <- yearlyDeathsByRegions(A2021)
# mapa testy
#install.packages(c("ggplot2", "sf", "rnaturalearth", "rnaturalearthdata",
#"googleway", "ggrepel", "libwgeom", "rnaturalearthhires"))
#devtools::install_github("ropensci/rnaturalearthhires")
library("ggplot2")
library("sf")
library("rnaturalearth")
library("rnaturalearthdata")
library("rnaturalearthhires")
#install.packages("devtools")
library("devtools")
theme_set(theme_bw())
PolandMapData <- ne_countries(scale = "medium", country = "Poland",
returnclass = "sf")
States <- ne_states(country = "Poland", returnclass = "sf")
#link
#https://ggplot2.tidyverse.org/reference/scale_viridis.html
#https://r-spatial.org/r/2018/10/25/ggplot2-sf-2.html
ggplot(data = PolandMapData) +
geom_sf() +
geom_sf(data = States, aes(fill = data$Deaths)) +
scale_fill_viridis_c(alpha = 1, begin = 0, end = 1, direction = -1,
option = "D", values = NULL, space = "Lab",
guide = "colourbar", aesthetics = "colour") +
coord_sf(xlim = c(13,25), ylim = c(48.75, 55), expand = F) +
ggsave("plots/plot#3.png", width = 7, height = 7)
#install.packages("gganimate")
library(gganimate)
